<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    
    <title>FUNtoFEM model &mdash; FUNtoFEM .0 documentation</title>
    
    <link rel="stylesheet" type="text/css" href="_static/css/spc-bootstrap.css">
    <link rel="stylesheet" type="text/css" href="_static/css/spc-extend.css">
    <link rel="stylesheet" href="_static/scipy.css" type="text/css" >
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" >
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/js/copybutton.js"></script>
    <link rel="index" title="Index" href="genindex.html" >
    <link rel="search" title="Search" href="search.html" >
    <link rel="top" title="FUNtoFEM .0 documentation" href="index.html" >
    <link rel="next" title="FUNtoFEM driver" href="driver.html" >
    <link rel="prev" title="Welcome to FUNtoFEM’s documentation" href="index.html" > 
  </head>
  <body>

  <div class="container">
    <div class="header">
    </div>
  </div>


    <div class="container">
      <div class="main">
        
	<div class="row-fluid">
	  <div class="span12">
	    <div class="spc-navbar">
              
    <ul class="nav nav-pills pull-left">
        <li class="active"><a href="["></a></li>
        <li class="active"><a href="]"></a></li>
	
        <li class="active"><a href="index.html">FUNtoFEM .0 documentation</a></li>
	 
    </ul>
              
              
    <ul class="nav nav-pills pull-right">
      <li class="active">
        <a href="genindex.html" title="General Index"
           accesskey="I">index</a>
      </li>
      <li class="active">
        <a href="py-modindex.html" title="Python Module Index"
           >modules</a>
      </li>
      <li class="active">
        <a href="driver.html" title="FUNtoFEM driver"
           accesskey="N">next</a>
      </li>
      <li class="active">
        <a href="index.html" title="Welcome to FUNtoFEM’s documentation"
           accesskey="P">previous</a>
      </li>
    </ul>
              
	    </div>
	  </div>
	</div>
        

	<div class="row-fluid">
      <div class="spc-rightsidebar span3">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">FUNtoFEM model</a><ul>
<li><a class="reference internal" href="#assembling-the-model">Assembling the model</a></li>
<li><a class="reference internal" href="#exchanging-the-model-data-with-an-optimizer">Exchanging the model data with an optimizer</a><ul>
<li><a class="reference internal" href="#design-variables">Design variables</a></li>
<li><a class="reference internal" href="#function-values">Function values</a></li>
<li><a class="reference internal" href="#gradients">Gradients</a></li>
<li><a class="reference internal" href="#module-funtofem_model">FUNtoFEM Model Class</a></li>
</ul>
</li>
<li><a class="reference internal" href="#bodies-and-scenarios">Bodies and Scenarios</a><ul>
<li><a class="reference internal" href="#scenarios">Scenarios</a></li>
<li><a class="reference internal" href="#bodies">Bodies</a></li>
<li><a class="reference internal" href="#base-class">Base class</a></li>
<li><a class="reference internal" href="#module-massoud_body">MassoudBody</a></li>
<li><a class="reference internal" href="#variables">Variables</a></li>
<li><a class="reference internal" href="#functions">Functions</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Welcome to FUNtoFEM’s documentation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="driver.html"
                        title="next chapter">FUNtoFEM driver</a></p>
<div class="this-page-menu">
  <a href="/scipy/docs/scipy-docs/model.rst.rst">Edit page</a>
</div>

        </div>
      </div>
          <div class="span9">
            
        <div class="bodywrapper">
          <div class="body" id="spc-section-body">
            
  <div class="section" id="funtofem-model">
<h1>FUNtoFEM model<a class="headerlink" href="#funtofem-model" title="Permalink to this headline">¶</a></h1>
<p>The model classes are used to stored design and coupling data related to the aeroelastic problem.
The model is made up of <a class="reference internal" href="#bodies-and-scenarios">bodies and scenarios</a> .</p>
<div class="figure">
<img alt="_images/funtofem_model.png" src="_images/funtofem_model.png" />
</div>
<p>The bodies are the different bodies in the simulations, such as the blades of a rotor.
The scenarios are the different points of a multipoint optimization.</p>
<p>Methods on this page with <strong>[driver call]</strong> and <strong>[model call]</strong> are calls that the user does not make directly and can be ignored.</p>
<div class="section" id="assembling-the-model">
<h2>Assembling the model<a class="headerlink" href="#assembling-the-model" title="Permalink to this headline">¶</a></h2>
<p>A model is assembled using the <a class="reference internal" href="#funtofem_model.FUNtoFEMmodel.add_body" title="funtofem_model.FUNtoFEMmodel.add_body"><code class="xref py py-func docutils literal"><span class="pre">add_body()</span></code></a> and <a class="reference internal" href="#funtofem_model.FUNtoFEMmodel.add_scenario" title="funtofem_model.FUNtoFEMmodel.add_scenario"><code class="xref py py-func docutils literal"><span class="pre">add_scenario()</span></code></a> calls. See <a class="reference internal" href="#bodies-and-scenarios">bodies and scenarios</a> for details about their creation.</p>
<p>The bodies and scenarios are kept in lists in the same order that they are input.</p>
</div>
<div class="section" id="exchanging-the-model-data-with-an-optimizer">
<h2>Exchanging the model data with an optimizer<a class="headerlink" href="#exchanging-the-model-data-with-an-optimizer" title="Permalink to this headline">¶</a></h2>
<p>The model object provides a convenient way to exchange data with a python-based optimizer.</p>
<div class="section" id="design-variables">
<h3>Design variables<a class="headerlink" href="#design-variables" title="Permalink to this headline">¶</a></h3>
<p>The assembled model contains all the design variables information that an optimizer such as PyOpt needs.
A list of the active design for the entire model is returned by <a class="reference internal" href="#funtofem_model.FUNtoFEMmodel.get_variables" title="funtofem_model.FUNtoFEMmodel.get_variables"><code class="xref py py-func docutils literal"><span class="pre">get_variables()</span></code></a>.
The output list contains the <a class="reference internal" href="#module-variable" title="variable"><code class="xref py py-class docutils literal"><span class="pre">variable</span></code></a> type. Here is an example of passing the variable information from the model to a PyOpt optimizer:</p>
<p><strong>The variables are stored in the model as a dictionary.</strong>
<strong>They return in of ordered list of scenarios in the order they were added to the model, then the bodies in the order that they were added. Within each scenario and body, the order is alphabetical by variable type. Within each variable type, the variables are in the order added to the body/scenario.</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyOpt</span> <span class="kn">import</span> <span class="n">Optimization</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="n">opt_prob</span> <span class="o">=</span> <span class="n">Optimization</span><span class="p">(</span><span class="s1">&#39;optimization&#39;</span><span class="p">,</span><span class="n">design_problem</span><span class="o">.</span><span class="n">eval_obj_con</span><span class="p">)</span>
<span class="n">variables</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">get_variables</span><span class="p">()</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">var</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">variables</span><span class="p">):</span>
    <span class="n">opt_prob</span><span class="o">.</span><span class="n">addVar</span><span class="p">(</span><span class="n">var</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="nb">type</span><span class="o">=</span><span class="s1">&#39;c&#39;</span><span class="p">,</span><span class="n">value</span><span class="o">=</span><span class="n">var</span><span class="o">.</span><span class="n">value</span><span class="o">/</span><span class="n">var</span><span class="o">.</span><span class="n">scaling</span><span class="p">,</span>
                                      <span class="n">lower</span><span class="o">=</span><span class="n">var</span><span class="o">.</span><span class="n">lower</span><span class="o">/</span><span class="n">var</span><span class="o">.</span><span class="n">scaling</span><span class="p">,</span>
                                      <span class="n">upper</span><span class="o">=</span><span class="n">var</span><span class="o">.</span><span class="n">upper</span><span class="o">/</span><span class="n">var</span><span class="o">.</span><span class="n">scaling</span><span class="p">)</span>
</pre></div>
</div>
<p>Optimizers such as PyOpt will typically provide a list of new values at each design point. These can be set back into model type using <a class="reference internal" href="#funtofem_model.FUNtoFEMmodel.set_variables" title="funtofem_model.FUNtoFEMmodel.set_variables"><code class="xref py py-func docutils literal"><span class="pre">set_variables()</span></code></a>.
The variables can be pre-scaled and passed directing into this call, or with the scale argument set to True, the scaling will be done automatically.</p>
</div>
<div class="section" id="function-values">
<h3>Function values<a class="headerlink" href="#function-values" title="Permalink to this headline">¶</a></h3>
<p>Once the driver has been run, <a class="reference internal" href="driver.html#funtofem_driver.FUNtoFEMDriver.solve_forward" title="funtofem_driver.FUNtoFEMDriver.solve_forward"><code class="xref py py-func docutils literal"><span class="pre">solve_forward()</span></code></a>, the functions can be retrieved using <a class="reference internal" href="#funtofem_model.FUNtoFEMmodel.get_functions" title="funtofem_model.FUNtoFEMmodel.get_functions"><code class="xref py py-func docutils literal"><span class="pre">get_functions()</span></code></a>.
The output list contains the <a class="reference internal" href="#module-function" title="function"><code class="xref py py-class docutils literal"><span class="pre">function</span></code></a> type. The following code prints the function values:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">driver</span><span class="o">.</span><span class="n">solve_forward</span><span class="p">()</span>
<span class="n">functions</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">get_functions</span><span class="p">()</span>

<span class="k">print</span> <span class="s2">&quot;Function values:&quot;</span>
<span class="k">for</span> <span class="n">function</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">variables</span><span class="p">):</span>
    <span class="k">print</span> <span class="n">function</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;=&#39;</span><span class="p">,</span> <span class="n">function</span><span class="o">.</span><span class="n">value</span>
</pre></div>
</div>
<p>The functions in the FUNtoFEM model need to be single discipline functions to maintain modularity. The following pseudo code lays out a function that can be used as an objective evaluation with PyObj:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">eval_obj_con</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

    <span class="n">fail</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">model</span><span class="o">.</span><span class="n">set_variables</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">scale</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">fail</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">solve_forward</span><span class="p">()</span>
    <span class="n">functions</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">get_functions</span><span class="p">()</span>

    <span class="c1"># Manipulate/scale/combine single discipline functions</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="n">XXXXX</span>
    <span class="n">con</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">YYYYY</span>

    <span class="k">return</span> <span class="n">obj</span><span class="p">,</span> <span class="n">con</span><span class="p">,</span> <span class="n">fail</span>
</pre></div>
</div>
</div>
<div class="section" id="gradients">
<h3>Gradients<a class="headerlink" href="#gradients" title="Permalink to this headline">¶</a></h3>
<p>The derivatives in the model class are populated by <a class="reference internal" href="driver.html#funtofem_driver.FUNtoFEMDriver.solve_adjoint" title="funtofem_driver.FUNtoFEMDriver.solve_adjoint"><code class="xref py py-func docutils literal"><span class="pre">solve_adjoint()</span></code></a>. Gradients can be retrieved using <a class="reference internal" href="#funtofem_model.FUNtoFEMmodel.get_function_gradients" title="funtofem_model.FUNtoFEMmodel.get_function_gradients"><code class="xref py py-func docutils literal"><span class="pre">get_function_gradients()</span></code></a>.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">variables</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">get_variables</span><span class="p">()</span>

<span class="n">driver</span><span class="o">.</span><span class="n">solve_forward</span><span class="p">()</span>
<span class="n">functions</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">get_functions</span><span class="p">()</span>

<span class="n">fail</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">solve_adjoint</span><span class="p">()</span>
<span class="n">grad</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">get_functions_gradients</span><span class="p">()</span>
<span class="k">for</span> <span class="n">ifunc</span><span class="p">,</span><span class="n">func</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">functions</span><span class="p">):</span>
           <span class="k">for</span> <span class="n">ivar</span><span class="p">,</span><span class="n">var</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">variables</span><span class="p">):</span>
               <span class="k">print</span> <span class="s1">&#39;Derivative of &#39;</span><span class="p">,</span> <span class="n">func</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;w.r.t.&#39;</span><span class="p">,</span> <span class="n">var</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="s1">&#39;=&#39;</span><span class="p">,</span> <span class="n">grad</span><span class="p">[</span><span class="n">ifunc</span><span class="p">][</span><span class="n">ivar</span><span class="p">]</span>
</pre></div>
</div>
<p>The following is a pseudo code would be a gradient evaluation for pyOpt.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">eval_obj_con_grad</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">obj</span><span class="p">,</span><span class="n">con</span><span class="p">)</span>

    <span class="n">fail</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c1"># get the scaling values</span>
    <span class="n">variables</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">get_variables</span><span class="p">()</span>
    <span class="n">var_scale</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">variables</span><span class="p">:</span>
        <span class="n">var_scaling</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">var</span><span class="o">.</span><span class="n">scale</span><span class="p">)</span>

    <span class="c1"># solve the adjoint problem</span>
    <span class="n">fail</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">solve_adjoint</span><span class="p">()</span>
    <span class="n">grad</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">get_functions_gradients</span><span class="p">()</span>

    <span class="c1"># use the chain / automatic differentiation to get the composite function derivatives</span>
    <span class="n">g</span> <span class="o">=</span> <span class="n">dobj</span><span class="o">/</span><span class="n">dfunc0</span> <span class="o">*</span> <span class="n">grad</span><span class="p">[</span><span class="mi">0</span><span class="p">][:]</span> <span class="o">*</span><span class="n">variable_scaling</span> <span class="o">+</span> <span class="n">dobj</span><span class="o">/</span><span class="n">dfunc1</span> <span class="o">*</span> <span class="n">grad</span><span class="p">[</span><span class="mi">1</span><span class="p">][:]</span> <span class="o">*</span> <span class="n">variable_scaling</span> <span class="o">+</span> <span class="o">...</span>
    <span class="n">A</span> <span class="o">=</span> <span class="n">YYYYY</span>

    <span class="k">return</span> <span class="n">g</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">fail</span>
</pre></div>
</div>
</div>
<div class="section" id="module-funtofem_model">
<span id="funtofem-model-class"></span><h3>FUNtoFEM Model Class<a class="headerlink" href="#module-funtofem_model" title="Permalink to this headline">¶</a></h3>
<p>This file is part of the package FUNtoFEM for coupled aeroelastic simulation
and design optimization.</p>
<p>Copyright (C) 2015 Georgia Tech Research Corporation.
Additional copyright (C) 2015 Kevin Jacobson, Jan Kiviaho and Graeme Kennedy.
All rights reserved.</p>
<p>FUNtoFEM is licensed under the Apache License, Version 2.0 (the “License”);
you may not use this software except in compliance with the License.
You may obtain a copy of the License at</p>
<blockquote>
<div><a class="reference external" href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></div></blockquote>
<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an “AS IS” BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p>
<dl class="class">
<dt id="funtofem_model.FUNtoFEMmodel">
<em class="property">class </em><code class="descclassname">funtofem_model.</code><code class="descname">FUNtoFEMmodel</code><span class="sig-paren">(</span><em>name</em>, <em>id=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/funtofem_model.html#FUNtoFEMmodel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#funtofem_model.FUNtoFEMmodel" title="Permalink to this definition">¶</a></dt>
<dd><p>The FUNtoFEMmodel type holds all the data required for a FUNtoFEM coupled simulation.
To create a model, instantiate it then add bodies and scenarios to it.
There are functions in the model type that allow for extraction of the function and
derivative values as well as setting the design variables</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#module-body" title="body"><code class="xref py py-mod docutils literal"><span class="pre">body</span></code></a>, <a class="reference internal" href="#module-scenario" title="scenario"><code class="xref py py-mod docutils literal"><span class="pre">scenario</span></code></a></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – name of the model</li>
<li><strong>id</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – id number of the model</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="funtofem_model.FUNtoFEMmodel.add_body">
<code class="descname">add_body</code><span class="sig-paren">(</span><em>body</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/funtofem_model.html#FUNtoFEMmodel.add_body"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#funtofem_model.FUNtoFEMmodel.add_body" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a body to the model. The body must be completely defined before adding to the model</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>body</strong> (<em>body object</em>) – the body to be added</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="funtofem_model.FUNtoFEMmodel.add_scenario">
<code class="descname">add_scenario</code><span class="sig-paren">(</span><em>scenario</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/funtofem_model.html#FUNtoFEMmodel.add_scenario"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#funtofem_model.FUNtoFEMmodel.add_scenario" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a scenario to model. The scenario must be completely defined before adding to the model</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>scenario</strong> (<em>scenario object</em>) – the scenario to be added</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="funtofem_model.FUNtoFEMmodel.print_summary">
<code class="descname">print_summary</code><span class="sig-paren">(</span><em>print_level=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/funtofem_model.html#FUNtoFEMmodel.print_summary"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#funtofem_model.FUNtoFEMmodel.print_summary" title="Permalink to this definition">¶</a></dt>
<dd><p>Print out a summary of the assembled model for inspection</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>print_level</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – how much detail to print in the summary. Print level &lt; 0 does not print all the variables</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="funtofem_model.FUNtoFEMmodel.get_variables">
<code class="descname">get_variables</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/funtofem_model.html#FUNtoFEMmodel.get_variables"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#funtofem_model.FUNtoFEMmodel.get_variables" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the variable objects of the entire model. Coupled variables only appear one</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>var_list</strong></td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">list of variable objects</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="funtofem_model.FUNtoFEMmodel.set_variables">
<code class="descname">set_variables</code><span class="sig-paren">(</span><em>dv</em>, <em>scale=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/funtofem_model.html#FUNtoFEMmodel.set_variables"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#funtofem_model.FUNtoFEMmodel.set_variables" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the variable values of the entire model given a list of values
in the same order as get_variables</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>dv</strong> (<em>list of float</em><em>, </em><a class="reference external" href="https://docs.python.org/2/library/functions.html#complex" title="(in Python v2.7)"><em>complex</em></a><em>, or </em><em>Variable objects</em>) – The variable values in the same order as <a class="reference internal" href="#funtofem_model.FUNtoFEMmodel.get_variables" title="funtofem_model.FUNtoFEMmodel.get_variables"><code class="xref py py-func docutils literal"><span class="pre">get_variables()</span></code></a> returns them</li>
<li><strong>scale</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – If scale, then the model variables will be set to dv * scaling stored in the variable type</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="funtofem_model.FUNtoFEMmodel.count_functions">
<code class="descname">count_functions</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/funtofem_model.html#FUNtoFEMmodel.count_functions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#funtofem_model.FUNtoFEMmodel.count_functions" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the number of functions in the model</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>count</strong> – The total number of functions in the model</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)">int</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="funtofem_model.FUNtoFEMmodel.get_functions">
<code class="descname">get_functions</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/funtofem_model.html#FUNtoFEMmodel.get_functions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#funtofem_model.FUNtoFEMmodel.get_functions" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all the functions in the model</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>functions</strong> – list of all the functions in the model ordered by the scenarios</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">list of function objects</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="funtofem_model.FUNtoFEMmodel.get_function_gradients">
<code class="descname">get_function_gradients</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/funtofem_model.html#FUNtoFEMmodel.get_function_gradients"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#funtofem_model.FUNtoFEMmodel.get_function_gradients" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the function gradients for all the functions in the model</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>gradients</strong> – derivative values
1st index = function number in the same order as get_functions
2st index = variable number in the same order as get_variables</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">list of list of floats</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="funtofem_model.FUNtoFEMmodel.enforce_coupling_derivatives">
<code class="descname">enforce_coupling_derivatives</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/funtofem_model.html#FUNtoFEMmodel.enforce_coupling_derivatives"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#funtofem_model.FUNtoFEMmodel.enforce_coupling_derivatives" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>[driver call]</strong> Sum the coupled variable derivatives in each group.</p>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="bodies-and-scenarios">
<h2>Bodies and Scenarios<a class="headerlink" href="#bodies-and-scenarios" title="Permalink to this headline">¶</a></h2>
<p>Bodies and scenarios organize the data associated for the coupling and design.
Additionally, the body class holds the shape parameterization and transfer scheme.
Shape parameterization is added by creating a new body class that subclasses the <a class="reference internal" href="#module-body" title="body"><code class="xref py py-class docutils literal"><span class="pre">body</span></code></a> class. See <a class="reference internal" href="#massoud_body.MassoudBody" title="massoud_body.MassoudBody"><code class="xref py py-class docutils literal"><span class="pre">MassoudBody</span></code></a> for an example.
The driver adds the details for the transfer scheme. See <a class="reference internal" href="driver.html#funtofem_driver.FUNtoFEMDriver" title="funtofem_driver.FUNtoFEMDriver"><code class="xref py py-class docutils literal"><span class="pre">FUNtoFEMDriver</span></code></a>.</p>
<div class="section" id="scenarios">
<h3>Scenarios<a class="headerlink" href="#scenarios" title="Permalink to this headline">¶</a></h3>
<p>Scenarios hold <a class="reference internal" href="#variables">variables</a> and <a class="reference internal" href="#functions">functions</a> in lists.
Variables and functions are added using <a class="reference internal" href="#scenario.Scenario.add_function" title="scenario.Scenario.add_function"><code class="xref py py-func docutils literal"><span class="pre">add_function()</span></code></a> and <a class="reference internal" href="#scenario.Scenario.add_variable" title="scenario.Scenario.add_variable"><code class="xref py py-func docutils literal"><span class="pre">add_variable()</span></code></a>.</p>
<p>An example of a scenario variable could be flow variables such as angle of attack or Mach number.</p>
<div class="figure">
<img alt="_images/scenario.png" src="_images/scenario.png" />
</div>
<span class="target" id="module-scenario"></span><p>This file is part of the package FUNtoFEM for coupled aeroelastic simulation
and design optimization.</p>
<p>Copyright (C) 2015 Georgia Tech Research Corporation.
Additional copyright (C) 2015 Kevin Jacobson, Jan Kiviaho and Graeme Kennedy.
All rights reserved.</p>
<p>FUNtoFEM is licensed under the Apache License, Version 2.0 (the “License”);
you may not use this software except in compliance with the License.
You may obtain a copy of the License at</p>
<blockquote>
<div><a class="reference external" href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></div></blockquote>
<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an “AS IS” BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p>
<dl class="class">
<dt id="scenario.Scenario">
<em class="property">class </em><code class="descclassname">scenario.</code><code class="descname">Scenario</code><span class="sig-paren">(</span><em>name</em>, <em>id=0</em>, <em>group=None</em>, <em>steady=True</em>, <em>fun3d=True</em>, <em>steps=1000</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scenario.html#Scenario"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scenario.Scenario" title="Permalink to this definition">¶</a></dt>
<dd><p>A class to hold scenario information for a design point in optimization</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – name of the scenario</li>
<li><strong>id</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – ID number of the body in the list of bodies in the model</li>
<li><strong>group</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – group number for the scenario. Coupled variables defined in the scenario will be coupled with
scenarios in the same group</li>
<li><strong>steady</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – whether the scenario’s simulation is steady or unsteady</li>
<li><strong>fun3d</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – whether or not you are using FUN3D. If true, the scenario class will auto-populate ‘aerodynamic’ required by FUN3D</li>
<li><strong>steps</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – the number of coupled time steps to run for the scenario</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><a class="reference internal" href="#module-base" title="base"><code class="xref py py-mod docutils literal"><span class="pre">base</span></code></a></dt>
<dd>Scenario inherits from Base</dd>
</dl>
</div>
<dl class="method">
<dt id="scenario.Scenario.add_function">
<code class="descname">add_function</code><span class="sig-paren">(</span><em>function</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scenario.html#Scenario.add_function"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scenario.Scenario.add_function" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a new function to the scenario’s function list</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>function</strong> (<a class="reference internal" href="#function.Function" title="function.Function"><em>Function</em></a>) – function object to be added to scenario</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="scenario.Scenario.count_functions">
<code class="descname">count_functions</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scenario.html#Scenario.count_functions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scenario.Scenario.count_functions" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the number of functions in this scenario</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>count</strong> – number of functions in this scenario</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)">int</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="scenario.Scenario.count_adjoint_functions">
<code class="descname">count_adjoint_functions</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/scenario.html#Scenario.count_adjoint_functions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scenario.Scenario.count_adjoint_functions" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the number of functions that require an adjoint in this scenario</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>count</strong> – number of adjoint-requiring functions in this scenario</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)">int</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="scenario.Scenario.add_variable">
<code class="descname">add_variable</code><span class="sig-paren">(</span><em>vartype</em>, <em>var</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scenario.html#Scenario.add_variable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scenario.Scenario.add_variable" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a new variable to the scenario’s variable dictionary</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>vartype</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – type of variable</li>
<li><strong>var</strong> (<em>Variable object</em>) – variable to be added</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="scenario.Scenario.update_id">
<code class="descname">update_id</code><span class="sig-paren">(</span><em>id</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scenario.html#Scenario.update_id"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scenario.Scenario.update_id" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>[model call]</strong>
Update the id number of the scenario</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>id</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – id number of the scenario</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="bodies">
<h3>Bodies<a class="headerlink" href="#bodies" title="Permalink to this headline">¶</a></h3>
<p>Shape parameterization is added by creating a new body class that subclasses the <a class="reference internal" href="#module-body" title="body"><code class="xref py py-class docutils literal"><span class="pre">body</span></code></a> class. See <a class="reference internal" href="#massoud_body.MassoudBody" title="massoud_body.MassoudBody"><code class="xref py py-class docutils literal"><span class="pre">MassoudBody</span></code></a> for an example.
The driver adds the details for the transfer scheme. See <a class="reference internal" href="driver.html#funtofem_driver.FUNtoFEMDriver" title="funtofem_driver.FUNtoFEMDriver"><code class="xref py py-class docutils literal"><span class="pre">FUNtoFEMDriver</span></code></a>.</p>
<div class="figure">
<img alt="_images/body.png" src="_images/body.png" />
</div>
<span class="target" id="module-body"></span><p>This file is part of the package FUNtoFEM for coupled aeroelastic simulation
and design optimization.</p>
<p>Copyright (C) 2015 Georgia Tech Research Corporation.
Additional copyright (C) 2015 Kevin Jacobson, Jan Kiviaho and Graeme Kennedy.
All rights reserved.</p>
<p>FUNtoFEM is licensed under the Apache License, Version 2.0 (the “License”);
you may not use this software except in compliance with the License.
You may obtain a copy of the License at</p>
<blockquote>
<div><a class="reference external" href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></div></blockquote>
<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an “AS IS” BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p>
<dl class="class">
<dt id="body.Body">
<em class="property">class </em><code class="descclassname">body.</code><code class="descname">Body</code><span class="sig-paren">(</span><em>name</em>, <em>id=0</em>, <em>group=None</em>, <em>boundary=0</em>, <em>fun3d=True</em>, <em>motion_type='deform'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/body.html#Body"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#body.Body" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines a body base class for FUNtoFEM. Can be used as is or as a parent class for bodies with shape parameterization.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – name of the body</li>
<li><strong>id</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – ID number of the body in the list of bodies in the model</li>
<li><strong>group</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – group number for the body. Coupled variables defined in the body will be coupled with
bodies in the same group</li>
<li><strong>boundary</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – FUN3D boundary number associated with the body</li>
<li><strong>fun3d</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – whether or not you are using FUN3D. If true, the body class will auto-populate ‘rigid_motion’ required by FUN3D</li>
<li><strong>motion_type</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – the type of motion the body is undergoing. Possible options: ‘deform’,’rigid’,’deform+rigid’,’rigid+deform’</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><a class="reference internal" href="#module-base" title="base"><code class="xref py py-mod docutils literal"><span class="pre">base</span></code></a></dt>
<dd>Body inherits from Base</dd>
<dt><a class="reference internal" href="#module-massoud_body" title="massoud_body"><code class="xref py py-mod docutils literal"><span class="pre">massoud_body</span></code></a></dt>
<dd>example of class inheriting Body and adding shape parameterization</dd>
</dl>
</div>
<dl class="method">
<dt id="body.Body.update_id">
<code class="descname">update_id</code><span class="sig-paren">(</span><em>id</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/body.html#Body.update_id"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#body.Body.update_id" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>[model call]</strong>
Update the id number of the body or scenario</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>id</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – id number of the scenario</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="body.Body.add_variable">
<code class="descname">add_variable</code><span class="sig-paren">(</span><em>vartype</em>, <em>var</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/body.html#Body.add_variable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#body.Body.add_variable" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a new variable to the body’s variable dictionary</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>vartype</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – type of variable</li>
<li><strong>var</strong> (<em>Variable object</em>) – variable to be added</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="base-class">
<h3>Base class<a class="headerlink" href="#base-class" title="Permalink to this headline">¶</a></h3>
<p>The body and scenario classes subclass the <a class="reference internal" href="#base-class">base class</a>.</p>
<p>Although most of the methods in the base class are used internally in the model, <a class="reference internal" href="#base.Base.set_variable" title="base.Base.set_variable"><code class="xref py py-func docutils literal"><span class="pre">set_variable()</span></code></a> allows the user to change attributes of existing <a class="reference internal" href="#variables">variables</a> in the body or scenario.
For example, if the shape parameterization created a specific number of variables, but you do not want to use all of them in the optimization, you can set the variable to be inactive.</p>
<span class="target" id="module-base"></span><p>This file is part of the package FUNtoFEM for coupled aeroelastic simulation
and design optimization.</p>
<p>Copyright (C) 2015 Georgia Tech Research Corporation.
Additional copyright (C) 2015 Kevin Jacobson, Jan Kiviaho and Graeme Kennedy.
All rights reserved.</p>
<p>FUNtoFEM is licensed under the Apache License, Version 2.0 (the “License”);
you may not use this software except in compliance with the License.
You may obtain a copy of the License at</p>
<blockquote>
<div><a class="reference external" href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></div></blockquote>
<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an “AS IS” BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p>
<dl class="class">
<dt id="base.Base">
<em class="property">class </em><code class="descclassname">base.</code><code class="descname">Base</code><span class="sig-paren">(</span><em>name</em>, <em>id=0</em>, <em>group=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/base.html#Base"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#base.Base" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for FUNtoFEM bodies and scenarios</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – name of the body or scenario</li>
<li><strong>id</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – id number in list of bodies or scenarios in the model</li>
<li><strong>group</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – group number for the body or scenario. Coupled variables defined in the body/scenario will be coupled with
bodies/scenarios in the same group</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#module-body" title="body"><code class="xref py py-mod docutils literal"><span class="pre">body</span></code></a>, <a class="reference internal" href="#module-scenario" title="scenario"><code class="xref py py-mod docutils literal"><span class="pre">scenario</span></code></a></p>
</div>
<dl class="method">
<dt id="base.Base.add_variable">
<code class="descname">add_variable</code><span class="sig-paren">(</span><em>vartype</em>, <em>var</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/base.html#Base.add_variable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#base.Base.add_variable" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a new variable to the body’s or scenario’s variable dictionary</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>vartype</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – type of variable</li>
<li><strong>var</strong> (<em>Variable object</em>) – variable to be added</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="base.Base.set_variable">
<code class="descname">set_variable</code><span class="sig-paren">(</span><em>vartype</em>, <em>name=None</em>, <em>index=None</em>, <em>value=None</em>, <em>lower=None</em>, <em>upper=None</em>, <em>scaling=None</em>, <em>active=True</em>, <em>coupled=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/base.html#Base.set_variable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#base.Base.set_variable" title="Permalink to this definition">¶</a></dt>
<dd><p>Set one or more properties of a variable given the vartype and either the variable name or a list of id’s</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>vartype</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – type of variable</li>
<li><strong>name</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – name of the variable</li>
<li><strong>index</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a><em> or </em><em>list of ints</em>) – list of id numbers for the variables to modify</li>
<li><strong>value</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a><em> or </em><a class="reference external" href="https://docs.python.org/2/library/functions.html#complex" title="(in Python v2.7)"><em>complex</em></a>) – value of the variable</li>
<li><strong>lower</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – lower bound for the variable</li>
<li><strong>upper</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – upper bound for the variable</li>
<li><strong>scaling</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – scaling of the variable for an optimizer</li>
<li><strong>active</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – whether or not the variable is active</li>
<li><strong>coupled</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – whether or not the variable is coupled</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>base.set_variable(‘aerodynamic’,name=’AOA’,value=3.0)</p>
<p>base.set_variable(‘structural’,index=2,active=False)</p>
<p>base.set_variable(‘structural’,index=[0,1,2,3,4],active=False)</p>
</dd></dl>

<dl class="method">
<dt id="base.Base.count_active_variables">
<code class="descname">count_active_variables</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/base.html#Base.count_active_variables"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#base.Base.count_active_variables" title="Permalink to this definition">¶</a></dt>
<dd><p>Counts the number of active variables in this body or scenario</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>count</strong> – number of active variables in the variable dictionary</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)">int</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="base.Base.count_uncoupled_variables">
<code class="descname">count_uncoupled_variables</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/base.html#Base.count_uncoupled_variables"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#base.Base.count_uncoupled_variables" title="Permalink to this definition">¶</a></dt>
<dd><p>Counts the number of variables in this body or scenario that are both uncoupled and active
This is the number of unique variables to this object</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>count</strong> – number of uncoupled, active variables in the variable dictionary</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)">int</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="base.Base.active_variables">
<code class="descname">active_variables</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/base.html#Base.active_variables"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#base.Base.active_variables" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the list of active variables in body or scenario</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>active_list</strong> – list of active variables</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">list of variables</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="base.Base.uncoupled_variables">
<code class="descname">uncoupled_variables</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/base.html#Base.uncoupled_variables"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#base.Base.uncoupled_variables" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the list of uncoupled, active variables in body or scenario</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>active_list</strong> – list of uncoupled, active variables</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">list of variables</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="base.Base.couple_variables">
<code class="descname">couple_variables</code><span class="sig-paren">(</span><em>base</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/base.html#Base.couple_variables"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#base.Base.couple_variables" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>[model call]</strong>
Updates coupled variables in the body or scenario based on the input’s variables</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>base</strong> (<a class="reference internal" href="#module-body" title="body"><em>body</em></a><em> or </em><em>scenario object</em>) – body or scenario to copy coupled variables from</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="base.Base.update_id">
<code class="descname">update_id</code><span class="sig-paren">(</span><em>id</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/base.html#Base.update_id"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#base.Base.update_id" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>[model call]</strong>
Update the id number of the body or scenario</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>id</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – id number of the scenario</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="base.Base.add_coupled_derivatives">
<code class="descname">add_coupled_derivatives</code><span class="sig-paren">(</span><em>base</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/base.html#Base.add_coupled_derivatives"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#base.Base.add_coupled_derivatives" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>[model call]</strong>
Adds coupled derivatives in the body or scenario based on the input’s derivatives</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>base</strong> (<a class="reference internal" href="#module-body" title="body"><em>body</em></a><em> or </em><em>scenario object</em>) – body or scenario to copy coupled variables from</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="base.Base.set_coupled_derivatives">
<code class="descname">set_coupled_derivatives</code><span class="sig-paren">(</span><em>base</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/base.html#Base.set_coupled_derivatives"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#base.Base.set_coupled_derivatives" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>[model call]</strong>
Updates coupled derivatives in the body or scenario based on the input’s derivatives</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>base</strong> (<a class="reference internal" href="#module-body" title="body"><em>body</em></a><em> or </em><em>scenario object</em>) – body or scenario to copy coupled variables from</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="base.Base.add_function_derivatives">
<code class="descname">add_function_derivatives</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/base.html#Base.add_function_derivatives"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#base.Base.add_function_derivatives" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>[model call]</strong>
For each variable, add a new derivative value for a single new function</p>
</dd></dl>

<dl class="method">
<dt id="base.Base.active_derivatives">
<code class="descname">active_derivatives</code><span class="sig-paren">(</span><em>n</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/base.html#Base.active_derivatives"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#base.Base.active_derivatives" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>[model call]</strong>
Get the derivatives of a function, n, with respect to all the active variables in this body or scenario</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>n</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – the function number</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>active_list</strong> – list of derivative values for each active variable in this object</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">list of float</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="base.Base.uncoupled_derivatives">
<code class="descname">uncoupled_derivatives</code><span class="sig-paren">(</span><em>n</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/base.html#Base.uncoupled_derivatives"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#base.Base.uncoupled_derivatives" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>[model call]</strong>
Get the derivatives of a function, n, with respect to all the uncoupled, active variables in this body or scenario</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>n</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – the function number</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>active_list</strong> – list of derivative values for each uncoupled, active variable in this object</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">list of float</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-massoud_body">
<span id="massoudbody"></span><h3>MassoudBody<a class="headerlink" href="#module-massoud_body" title="Permalink to this headline">¶</a></h3>
<p>This file is part of the package FUNtoFEM for coupled aeroelastic simulation
and design optimization.</p>
<p>Copyright (C) 2015 Georgia Tech Research Corporation.
Additional copyright (C) 2015 Kevin Jacobson, Jan Kiviaho and Graeme Kennedy.
All rights reserved.</p>
<p>FUNtoFEM is licensed under the Apache License, Version 2.0 (the “License”);
you may not use this software except in compliance with the License.
You may obtain a copy of the License at</p>
<blockquote>
<div><a class="reference external" href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></div></blockquote>
<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an “AS IS” BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p>
<dl class="class">
<dt id="massoud_body.MassoudBody">
<em class="property">class </em><code class="descclassname">massoud_body.</code><code class="descname">MassoudBody</code><span class="sig-paren">(</span><em>name</em>, <em>id=0</em>, <em>group=None</em>, <em>boundary=0</em>, <em>fun3d=True</em>, <em>motion_type='deform'</em>, <em>ndv=0</em>, <em>aero_gp_file=''</em>, <em>struct_gp_file=''</em>, <em>dv_file=''</em>, <em>usd_file=''</em>, <em>comm=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/massoud_body.html#MassoudBody"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#massoud_body.MassoudBody" title="Permalink to this definition">¶</a></dt>
<dd><p>Body class with Massoud parameterization</p>
<p>Uses calls to the Massoud Python wrapper</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – name of the body</li>
<li><strong>id</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – id number of the body</li>
<li><strong>group</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – group number for coupling of variables</li>
<li><strong>boundary</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – FUN3D boundary number associated with the body</li>
<li><strong>fun3d</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – whether or not you are using FUN3D. If true, the body class will auto-populate ‘rigid_motion’ required by FUN3D</li>
<li><strong>motion_type</strong> – the type of motion the body is undergoing. Possible options: ‘deform’,’rigid’,’deform+rigid’</li>
<li><strong>ndv</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – number of shape design variables in the MASSOUD parameterization</li>
<li><strong>aero_gp_file</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – name of the file with the MASSOUD parameterized aerodynamic surface mesh</li>
<li><strong>struct_gp_file</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – name of the file with the MASSOUD parameterized structural mesh</li>
<li><strong>dv_file</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – name of the MASSOUD dv_file</li>
<li><strong>usd_file</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – name of the MASSOUD usd_file</li>
<li><strong>comm</strong> (<em>MPI comm</em>) – the FUNtoFEM communicator</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><a class="reference internal" href="#module-body" title="body"><code class="xref py py-mod docutils literal"><span class="pre">body</span></code></a></dt>
<dd>MassoudBody inherits from Body</dd>
</dl>
</div>
<dl class="method">
<dt id="massoud_body.MassoudBody.initialize_shape_parameterization">
<code class="descname">initialize_shape_parameterization</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/massoud_body.html#MassoudBody.initialize_shape_parameterization"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#massoud_body.MassoudBody.initialize_shape_parameterization" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>[driver call]</strong>
Create the map of structural node locations since TACS doesn’t give us global id numbers</p>
</dd></dl>

<dl class="method">
<dt id="massoud_body.MassoudBody.update_shape">
<code class="descname">update_shape</code><span class="sig-paren">(</span><em>complex_run=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/massoud_body.html#MassoudBody.update_shape"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#massoud_body.MassoudBody.update_shape" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>[driver call]</strong>
perturbs the shape of the body based on the body’s shape variables and update the meshes</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>complex_run</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – whether or not the run is complex mode</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="massoud_body.MassoudBody.shape_derivative">
<code class="descname">shape_derivative</code><span class="sig-paren">(</span><em>scenario</em>, <em>offset</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/massoud_body.html#MassoudBody.shape_derivative"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#massoud_body.MassoudBody.shape_derivative" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>[driver call]</strong>
Calculates the shape derivative given the coordinate derivatives</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>scenario</strong> (<em>scenario object</em>) – The current scenario</li>
<li><strong>offset</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – function offset number</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="variables">
<h3>Variables<a class="headerlink" href="#variables" title="Permalink to this headline">¶</a></h3>
<p>Some solvers like FUN3D require some design variables to be defined, whether or not it is being used in design.
The active attribute of the <a class="reference internal" href="#variable.Variable" title="variable.Variable"><code class="xref py py-class docutils literal"><span class="pre">Variable</span></code></a> class. Setting it to False, allows you to still define the variable but it won’t be returned when calling <a class="reference internal" href="#funtofem_model.FUNtoFEMmodel.get_variables" title="funtofem_model.FUNtoFEMmodel.get_variables"><code class="xref py py-func docutils literal"><span class="pre">get_variables()</span></code></a>.
When the variable is added to a <a class="reference internal" href="#scenario.Scenario" title="scenario.Scenario"><code class="xref py py-class docutils literal"><span class="pre">Scenario</span></code></a> or <a class="reference internal" href="#body.Body" title="body.Body"><code class="xref py py-class docutils literal"><span class="pre">Body</span></code></a> using <a class="reference internal" href="#base.Base.add_variable" title="base.Base.add_variable"><code class="xref py py-func docutils literal"><span class="pre">add_variable()</span></code></a>, the vartype argument specifies what discipline the variable is associated with.</p>
<span class="target" id="module-variable"></span><p>This file is part of the package FUNtoFEM for coupled aeroelastic simulation
and design optimization.</p>
<p>Copyright (C) 2015 Georgia Tech Research Corporation.
Additional copyright (C) 2015 Kevin Jacobson, Jan Kiviaho and Graeme Kennedy.
All rights reserved.</p>
<p>FUNtoFEM is licensed under the Apache License, Version 2.0 (the “License”);
you may not use this software except in compliance with the License.
You may obtain a copy of the License at</p>
<blockquote>
<div><a class="reference external" href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></div></blockquote>
<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an “AS IS” BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p>
<dl class="class">
<dt id="variable.Variable">
<em class="property">class </em><code class="descclassname">variable.</code><code class="descname">Variable</code><span class="sig-paren">(</span><em>name='unknown'</em>, <em>value=0.0</em>, <em>lower=0.0</em>, <em>upper=1.0</em>, <em>scaling=1.0</em>, <em>active=True</em>, <em>coupled=False</em>, <em>id=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/variable.html#Variable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#variable.Variable" title="Permalink to this definition">¶</a></dt>
<dd><p>Design variable type for FUNtoFEM</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – name of the variable</li>
<li><strong>value</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – current value of the variable</li>
<li><strong>lower</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – lower bound of the design variable</li>
<li><strong>upper</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – upper bound of the design variable</li>
<li><strong>scaling</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – scaling of the variable for an optimizer</li>
<li><strong>active</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – whether or not the design variable is active</li>
<li><strong>coupled</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – whether or not the design variable is coupled</li>
<li><strong>id</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – id number of the design variable</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>thickness = Variable(name=’thickness 0’, value = 0.004, lower = 0.001, upper 0.1)</p>
<dl class="method">
<dt id="variable.Variable.assign">
<code class="descname">assign</code><span class="sig-paren">(</span><em>value=None</em>, <em>lower=None</em>, <em>upper=None</em>, <em>scaling=None</em>, <em>active=None</em>, <em>coupled=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/variable.html#Variable.assign"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#variable.Variable.assign" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the one or more of the attributes of the design variable</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>value</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – new value of the variable</li>
<li><strong>lower</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – lower bound of the design variable</li>
<li><strong>upper</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – upper bound of the design variable</li>
<li><strong>scaling</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – scaling of the variable for an optimizer</li>
<li><strong>active</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – whether or not the design variable is active</li>
<li><strong>coupled</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – whether or not the design variable is coupled</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="functions">
<h3>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h3>
<p>Functions in the FUNtoFEM framework are single discipline functions.
The <em>analysis_type</em> argument specifics which discipline the function is associated with.
Currently the options are ‘aerodynamic’ and ‘structural’.</p>
<p>Once the function is instantiated, <a class="reference internal" href="#scenario.Scenario.add_function" title="scenario.Scenario.add_function"><code class="xref py py-class docutils literal"><span class="pre">add_function</span></code></a> is used to add it to a scenario.
Although the function values could be accessed from the model type, <a class="reference internal" href="#funtofem_model.FUNtoFEMmodel.get_functions" title="funtofem_model.FUNtoFEMmodel.get_functions"><code class="xref py py-func docutils literal"><span class="pre">get_functions()</span></code></a> will return all the <a class="reference internal" href="#functions">functions</a> defined in the model.</p>
<p>When FUNtoFEM is used with FUN3D, the name of any function that would be defined in the rubber.data can be used.
For functions that do not need an adjoint, such as structural mass, the boolean, adjoint, should be set to false.
Some functions are associated with particular bodies, for instance, if you wanted the thrust or torque of a rotor without including that of the sting model, you can use the body argument to pass that information to the solver.</p>
<span class="target" id="module-function"></span><p>This file is part of the package FUNtoFEM for coupled aeroelastic simulation
and design optimization.</p>
<p>Copyright (C) 2015 Georgia Tech Research Corporation.
Additional copyright (C) 2015 Kevin Jacobson, Jan Kiviaho and Graeme Kennedy.
All rights reserved.</p>
<p>FUNtoFEM is licensed under the Apache License, Version 2.0 (the “License”);
you may not use this software except in compliance with the License.
You may obtain a copy of the License at</p>
<blockquote>
<div><a class="reference external" href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></div></blockquote>
<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an “AS IS” BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p>
<dl class="class">
<dt id="function.Function">
<em class="property">class </em><code class="descclassname">function.</code><code class="descname">Function</code><span class="sig-paren">(</span><em>name</em>, <em>id=0</em>, <em>value=0.0</em>, <em>start=0</em>, <em>stop=-1</em>, <em>analysis_type=None</em>, <em>body=-1</em>, <em>adjoint=True</em>, <em>options=None</em>, <em>averaging=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/function.html#Function"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#function.Function" title="Permalink to this definition">¶</a></dt>
<dd><p>holds component function information in FUNtoFEM</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – name of the function</li>
<li><strong>id</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – id number of function</li>
<li><strong>value</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – value of the function</li>
<li><strong>start</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – time step that the function window starts. If steady, then ignore</li>
<li><strong>stop</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – time step that the function window ends. If steady, set to -1 (the default)</li>
<li><strong>analysis_type</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – type of analysis this function is associated with: ‘aerodynamic’,’structural’</li>
<li><strong>body</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – body number that the function is associated with. The default is 0 which is all bodies</li>
<li><strong>adjoint</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – whether or not an adjoint is required for a function</li>
<li><strong>options</strong> (<a class="reference external" href="https://docs.python.org/2/library/stdtypes.html#dict" title="(in Python v2.7)"><em>dict</em></a>) – any options associated with the function and pass to the solvers</li>
<li><strong>averaging</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – whether the function is averaged or integrated or the function window. Ignored for steady functions</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>lift = Function(‘lift’,analysis_type=’aerodynamic’)</p>
<p>mass = Function(‘mass’,analysis_type=’structural’,adjoint=False)</p>
<p>ks = Function(‘ksFailure’,analysis_type=’structural’,options={‘ksweight’:50.0})</p>
</dd></dl>

</div>
</div>
</div>


          </div>
        </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container container-navbar-bottom">
      <div class="spc-navbar">
        
      </div>
    </div>
    <div class="container">
    <div class="footer">
    <div class="row-fluid">
    <ul class="inline pull-left">
      <li>
        &copy; Copyright 2017, Jan F. Kiviaho, Kevin E. Jacobson, Graeme J. Kennedy.
      </li>
      <li>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.6.7.
      </li>
    </ul>
    </div>
    </div>
    </div>
  </body>
</html>